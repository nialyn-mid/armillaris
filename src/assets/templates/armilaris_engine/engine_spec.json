{
    "name": "Armillaris Default Engine",
    "description": "Standard Keyword & Meta Activation Engine",
    "categories": {
        "Input": {
            "color": "#0078d4"
        },
        "Output": {
            "color": "#d83b01"
        },
        "Filter": {
            "color": "#8e44ad"
        },
        "Graph": {
            "color": "#16a085"
        },
        "Utility": {
            "color": "#607d8b"
        }
    },
    "nodes": [
        {
            "type": "InputSource",
            "label": "Input Entry List",
            "category": "Input",
            "description": "The full list of entries from Data.",
            "inputs": [],
            "outputs": [
                {
                    "id": "entries",
                    "label": "Entries",
                    "type": "Entry List"
                }
            ],
            "properties": []
        },
        {
            "type": "InputSource",
            "label": "Input Chat",
            "category": "Input",
            "description": "All chat fields provided by the system.",
            "inputs": [],
            "outputs": [
                {
                    "id": "last_message",
                    "label": "Last Message",
                    "type": "String"
                },
                {
                    "id": "last_messages",
                    "label": "Message History",
                    "type": "Message List"
                },
                {
                    "id": "first_message_date",
                    "label": "First Message Date",
                    "type": "Date"
                },
                {
                    "id": "last_bot_message_date",
                    "label": "Last Bot Message Date",
                    "type": "Date"
                },
                {
                    "id": "message_count",
                    "label": "Message Count",
                    "type": "Number"
                },
                {
                    "id": "contextLength",
                    "label": "Context Length",
                    "type": "Number"
                },
                {
                    "id": "user_name",
                    "label": "User Name",
                    "type": "String"
                },
                {
                    "id": "persona_name",
                    "label": "Persona Name",
                    "type": "String"
                }
            ],
            "properties": []
        },
        {
            "type": "InputSource",
            "label": "Character Input",
            "category": "Input",
            "description": "All character fields provided by the system.",
            "inputs": [],
            "outputs": [
                {
                    "id": "name",
                    "label": "Name",
                    "type": "String"
                },
                {
                    "id": "chat_name",
                    "label": "Chat Name",
                    "type": "String"
                },
                {
                    "id": "example_dialogs",
                    "label": "Example Dialogs",
                    "type": "String"
                },
                {
                    "id": "personality",
                    "label": "Personality",
                    "type": "String"
                },
                {
                    "id": "scenario",
                    "label": "Scenario",
                    "type": "String"
                },
                {
                    "id": "custom_prompt_complete",
                    "label": "Custom Prompt",
                    "type": "String"
                }
            ],
            "properties": []
        },
        {
            "type": "InputSource",
            "label": "Custom Attributes Input",
            "category": "Input",
            "description": "Create a custom attribute list from names and values.",
            "inputs": [
                {
                    "id": "names",
                    "label": "Names",
                    "type": "String List"
                },
                {
                    "id": "values",
                    "label": "Values",
                    "type": "Value List"
                }
            ],
            "outputs": [
                {
                    "id": "attributes",
                    "label": "Attributes",
                    "type": "Attribute List"
                }
            ],
            "properties": {
                "$for": "node.expandable_properties",
                "$item": {
                    "name": "attribute_{{_value}}",
                    "label": "Attribute {{_value}}",
                    "type": "Property Block",
                    "content": [
                        {
                            "name": "attribute_name",
                            "label": "Attribute Name",
                            "type": "String",
                            "default": "Attribute"
                        },
                        {
                            "name": "attribute_type",
                            "label": "Attribute Type",
                            "type": "select",
                            "options": [
                                {
                                    "value": "String",
                                    "label": "String"
                                },
                                {
                                    "value": "Number",
                                    "label": "Number"
                                },
                                {
                                    "value": "Boolean",
                                    "label": "Boolean"
                                },
                                {
                                    "value": "Date",
                                    "label": "Date"
                                },
                                {
                                    "value": "String List",
                                    "label": "String List"
                                }
                            ],
                            "default": "String"
                        },
                        {
                            "name": "attribute_value",
                            "label": "Attribute Value",
                            "type": "Value"
                        }
                    ]
                }
            }
        },
        {
            "type": "InputSource",
            "label": "Custom Value List Input",
            "category": "Input",
            "description": "Create a custom value list by defining the type and values.",
            "inputs": [
                {
                    "id": "type",
                    "label": "Type",
                    "type": "String"
                }
            ],
            "outputs": [
                {
                    "id": "values",
                    "label": "Values",
                    "type": "Value List"
                }
            ],
            "properties": {
                "value_type": {
                    "label": "Value Type",
                    "type": "select",
                    "options": [
                        {
                            "value": "String",
                            "label": "String"
                        },
                        {
                            "value": "Number",
                            "label": "Number"
                        },
                        {
                            "value": "Boolean",
                            "label": "Boolean"
                        },
                        {
                            "value": "Date",
                            "label": "Date"
                        },
                        {
                            "value": "String List",
                            "label": "String List"
                        }
                    ],
                    "default": "String"
                },
                "$for": "node.expandable_properties",
                "$item": {
                    "name": "value_{{_value}}",
                    "label": "Value {{_value}}",
                    "type": "Value"
                }
            }
        },
        {
            "type": "Filter",
            "label": "Entry Filter",
            "category": "Filter",
            "description": "Filter entries based on attribute values.",
            "inputs": [
                {
                    "id": "entries",
                    "label": "Entries",
                    "type": "Entry List"
                },
                {
                    "id": "attributes",
                    "label": "Attributes",
                    "type": "Attribute List"
                },
                {
                    "id": "values",
                    "label": "Values",
                    "type": "Value List"
                }
            ],
            "outputs": [
                {
                    "id": "entries",
                    "label": "Entries",
                    "type": "Entry List"
                }
            ],
            "properties": [
                {
                    "name": "combine",
                    "label": "Combine",
                    "type": "select",
                    "options": [
                        {
                            "value": "or",
                            "label": "Any"
                        },
                        {
                            "value": "and",
                            "label": "All"
                        }
                    ],
                    "default": "or"
                },
                {
                    "name": "attributes",
                    "label": "Attributes",
                    "type": "Attribute List",
                    "default": ""
                },
                {
                    "name": "operator",
                    "label": "Operator",
                    "type": "select",
                    "options": [
                        {
                            "value": "contains",
                            "label": "Contains"
                        },
                        {
                            "value": "not contains",
                            "label": "Does Not Contain"
                        },
                        {
                            "value": "==",
                            "label": "Is"
                        },
                        {
                            "value": "!=",
                            "label": "Is Not"
                        },
                        {
                            "value": ">=",
                            "label": "Greater Than Or Equal To"
                        },
                        {
                            "value": "<=",
                            "label": "Less Than Or Equal To"
                        },
                        {
                            "value": ">",
                            "label": "Greater Than"
                        },
                        {
                            "value": "<",
                            "label": "Less Than"
                        }
                    ],
                    "default": "=="
                },
                {
                    "name": "values",
                    "label": "Values",
                    "type": "Value List"
                }
            ]
        },
        {
            "type": "Filter",
            "label": "Keyword Filter",
            "category": "Filter",
            "description": "Filter entries based on their associated keywords' presence in the input messages.",
            "inputs": [
                {
                    "id": "entries",
                    "label": "Entries",
                    "type": "Entry List"
                },
                {
                    "id": "messages",
                    "label": "Messages",
                    "type": "Message List"
                },
                {
                    "id": "case_sensitive",
                    "label": "Case Sensitive",
                    "type": "Boolean"
                },
                {
                    "id": "wordbreak_sensitive",
                    "label": "Match Inside Word",
                    "type": "Boolean"
                },
                {
                    "id": "match_limit",
                    "label": "Match Limit",
                    "type": "Number"
                },
                {
                    "id": "message_range_start",
                    "label": "Message Range Start",
                    "type": "Number"
                },
                {
                    "id": "message_range_end",
                    "label": "Message Range End",
                    "type": "Number"
                }
            ],
            "outputs": [
                {
                    "id": "entries",
                    "label": "Entries",
                    "type": "Entry List"
                }
            ],
            "properties": [
                {
                    "name": "case_sensitive",
                    "label": "Case Sensitive",
                    "type": "Boolean",
                    "default": false
                },
                {
                    "name": "wordbreak_sensitive",
                    "label": "Match Inside Word",
                    "type": "Boolean",
                    "default": false
                },
                {
                    "name": "match_limit",
                    "label": "Match Limit Per Message",
                    "type": "Number",
                    "default": 0
                },
                {
                    "name": "message_user_type",
                    "label": "Sender Type",
                    "type": "select",
                    "options": [
                        {
                            "value": "user",
                            "label": "User"
                        },
                        {
                            "value": "bot",
                            "label": "Bot"
                        },
                        {
                            "value": "all",
                            "label": "All"
                        }
                    ],
                    "default": "all"
                }
            ]
        },
        {
            "type": "Filter",
            "label": "Message Filter",
            "category": "Filter",
            "description": "Filter messages based on conditions about message content.",
            "inputs": [
                {
                    "id": "messages",
                    "label": "Messages",
                    "type": "Message List"
                },
                {
                    "id": "conditions",
                    "label": "Conditions",
                    "type": "String List"
                }
            ],
            "outputs": [
                {
                    "id": "matched_messages",
                    "label": "Matched Messages",
                    "type": "Message List"
                },
                {
                    "id": "matched_conditions",
                    "label": "Matched Conditions",
                    "type": "String List"
                },
                {
                    "id": "unmatched_messages",
                    "label": "Unmatched Messages",
                    "type": "Message List"
                },
                {
                    "id": "unmatched_conditions",
                    "label": "Unmatched Conditions",
                    "type": "String List"
                }
            ],
            "properties": [
                {
                    "name": "case_sensitive",
                    "label": "Case Sensitive",
                    "type": "Boolean",
                    "default": false
                },
                {
                    "name": "wordbreak_sensitive",
                    "label": "Match Inside Word",
                    "type": "Boolean",
                    "default": false
                },
                {
                    "name": "message_user_type",
                    "label": "Sender Type",
                    "type": "select",
                    "options": [
                        {
                            "value": "user",
                            "label": "User"
                        },
                        {
                            "value": "bot",
                            "label": "Bot"
                        },
                        {
                            "value": "all",
                            "label": "All"
                        }
                    ],
                    "default": "all"
                },
                {
                    "name": "is_regex",
                    "label": "Use As RegEx",
                    "type": "Boolean",
                    "default": false
                }
            ]
        },
        {
            "type": "Filter",
            "label": "List Filter",
            "category": "Filter",
            "description": "Filter a list based on numeric patterns.",
            "inputs": [
                {
                    "id": "list",
                    "label": "Input List",
                    "type": "List"
                }
            ],
            "outputs": [
                {
                    "id": "list",
                    "label": "Output List",
                    "type": "List"
                }
            ],
            "properties": [
                {
                    "name": "trim_start",
                    "label": "Trim Start",
                    "type": "Number",
                    "default": 0
                },
                {
                    "name": "trim_end",
                    "label": "Trim End",
                    "type": "Number",
                    "default": 0
                },
                {
                    "name": "frequency",
                    "label": "Include Every Nth",
                    "type": "Number",
                    "default": 1
                }
            ]
        },
        {
            "type": "AttributeExtractor",
            "label": "Attribute",
            "category": "Utility",
            "description": "Extract attributes from an entry.",
            "inputs": [
                {
                    "id": "entry",
                    "label": "Entry",
                    "type": "Entry"
                }
            ],
            "outputs": [
                {
                    "$for": "entry.meta.attributes",
                    "$item": {
                        "id": "{{_value}}",
                        "label": "{{_value}}",
                        "type": "Attribute"
                    }
                }
            ],
            "properties": []
        },
        {
            "type": "AttributeExtractor",
            "label": "Attribute List",
            "category": "Utility",
            "description": "Extract attributes from a list of entries.",
            "inputs": [
                {
                    "id": "entries",
                    "label": "Entries",
                    "type": "Entry List"
                }
            ],
            "outputs": [
                {
                    "$for": "entries.meta.attributes",
                    "$item": {
                        "id": "{{_value}}_list",
                        "label": "{{_value}}",
                        "type": "Attribute List"
                    }
                }
            ],
            "properties": []
        },
        {
            "type": "DataUtility",
            "label": "Join List",
            "category": "Utility",
            "description": "Join multiple lists of the same type into a single list.",
            "inputs": {
                "$for": "node.expandable_inputs",
                "$item": {
                    "id": "list_{{_value}}",
                    "label": "List {{_value}}",
                    "type": "List"
                }
            },
            "outputs": [
                {
                    "id": "joined_list",
                    "label": "Joined List",
                    "type": "List"
                }
            ],
            "properties": []
        },
        {
            "type": "DataUtility",
            "label": "Value Map",
            "category": "Utility",
            "description": "Map values from one list to another.",
            "inputs": {
                "values": {
                    "label": "Values",
                    "type": "Value List"
                },
                "$for": "node.mappings",
                "$item": {
                    "id": "mapping_{{_value}}",
                    "label": "Mapping {{_value}}",
                    "type": "Value List"
                }
            },
            "outputs": [
                {
                    "id": "outputs",
                    "label": "Outputs",
                    "type": "Value List"
                }
            ],
            "properties": {
                "$for": "node.mappings",
                "$item": {
                    "name": "mapping_{{_value}}",
                    "label": "Mapping {{_value}}",
                    "type": "Property Block",
                    "content": {
                        "$for": "inputs",
                        "$item": {
                            "name": "input_{{_value}}",
                            "label": "Input {{_value}}",
                            "type": "Value"
                        },
                        "output_{{_value}}": {
                            "label": "Output {{_value}}",
                            "type": "Value"
                        }
                    }
                }
            }
        },
        {
            "type": "DataUtility",
            "label": "Sort Messages",
            "category": "Utility",
            "description": "Sort messages based on a chosen method.",
            "inputs": [
                {
                    "id": "messages",
                    "label": "Messages",
                    "type": "Message List"
                }
            ],
            "outputs": [
                {
                    "id": "sorted_messages",
                    "label": "Sorted Messages",
                    "type": "Message List"
                },
                {
                    "id": "inverse_sorted_messages",
                    "label": "Inverse Sorted Messages",
                    "type": "Message List"
                }
            ],
            "properties": [
                {
                    "name": "sort_by",
                    "label": "Sort By",
                    "type": "select",
                    "options": [
                        {
                            "value": "date",
                            "label": "Date (Recent First)"
                        },
                        {
                            "value": "random",
                            "label": "Random"
                        }
                    ]
                }
            ]
        },
        {
            "type": "DataUtility",
            "label": "Sort Entries By Attribute",
            "category": "Utility",
            "description": "Sort entries based on an attribute.",
            "inputs": [
                {
                    "id": "entries",
                    "label": "Entries",
                    "type": "Entry List"
                },
                {
                    "id": "attribute",
                    "label": "Attribute",
                    "type": "Attribute"
                }
            ],
            "outputs": [
                {
                    "id": "sorted_entries",
                    "label": "Sorted Entries",
                    "type": "Entry List"
                },
                {
                    "id": "inverse_sorted_entries",
                    "label": "Inverse Sorted Entries",
                    "type": "Entry List"
                }
            ],
            "properties": [
                {
                    "name": "attribute",
                    "label": "Attribute",
                    "type": "Attribute"
                }
            ]
        },
        {
            "type": "Adjacency",
            "label": "Graph Adjacency",
            "category": "Graph",
            "description": "Output the entries which are a distance from the input entries.",
            "inputs": [
                {
                    "id": "entries",
                    "label": "Entries",
                    "type": "Entry List"
                },
                {
                    "id": "distance",
                    "label": "Distance",
                    "type": "Number"
                }
            ],
            "outputs": [
                {
                    "id": "adjacency",
                    "label": "Adjacency",
                    "type": "Entry List"
                }
            ],
            "properties": [
                {
                    "name": "distance",
                    "label": "Distance",
                    "type": "Number",
                    "default": 1
                }
            ]
        },
        {
            "type": "OutputRoot",
            "label": "Activation Output",
            "category": "Output",
            "inputs": [
                {
                    "id": "entries",
                    "label": "Entries",
                    "type": "Entry List"
                }
            ],
            "outputs": [],
            "properties": []
        }
    ]
}